@model List<OrderHistoryModel>

@{
    ViewData["Title"] = "Order History";
}

@section styles{
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.css" type="text/css" />
}



<div class="row">
    <div class="col-sm-12 offset-lg-2 col-lg-8 offset-xl-3 col-xl-6">
        <h2 class="heading-margin text-center">My order history</h2>

        <form asp-controller="Order" asp-action="MyOrderHistory" method="get">
            <div class="col-10 offset-3 mt-3">
                <div class="col-6">
                    <input type="text" id="txtDate" name="dDate" class="form-control" placeholder="Pick a Date" autocomplete="off" />
                </div>
                <div class="col-6 mt-3 text-center">
                    <input type="submit" value="Submit" class="btn btn-primary" />
                </div>
                <div class="col-6 mt-3 text-center">
                    <label id="lblDate">@ViewBag.Message</label>
                </div>
            </div>
        </form>

        @foreach (var item1 in Model)
        {
            <table class="table">


                <thead>
                    <tr>
                        <th scope="col">Order Date - @item1.OrderDate.ToString("dd/MM/yyyy HH:mm")</th>
                        <th scope="col">Items</th>
                        <th scope="col">Quantity</th>
                        <th scope="col">Price (FullPrice - @item1.FullPrice.ToString("F2"))</th>
                    </tr>
                </thead>

                @foreach (var item in item1.Items)
                {

                    <tbody>
                        <tr>
                            <th row"1"></th>
                            <td>@item.Name</td>
                            <td>@item.Quantity</td>
                            <td>@item.Price.ToString("F2")</td>

                    </tbody>
                }
            </table>

        }
    </div>

    @if (Model.Count == 0)
    {
        <div class="jumbotron jumbotron-fluid col-12">
            <div class="container">
                <h1 class="display-4 text-center">No orders on this date</h1>
            </div>
        </div>
    }


</div>





@section scripts{

    <script type="text/javascript" src='https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js'></script>
    <script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/js/bootstrap.min.js'></script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $('#txtDate').datepicker({
                changeMonth: true,
                changeYear: true,
                format: "dd/mm/yyyy",
                language: "tr"
            });
        });
    </script>

    @if (ViewBag.Message != null)
    {
        <script type="text/javascript">
            $(function () {
                alert("@ViewBag.Message");
            });
        </script>
    }
}